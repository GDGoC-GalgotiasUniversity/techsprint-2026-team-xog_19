@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 10%;
    --foreground: 0 0% 98%;

    --card: 0 0% 13%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 13%;
    --popover-foreground: 0 0% 98%;

    --primary: 48 100% 50%;
    --primary-foreground: 0 0% 10%;

    --secondary: 0 0% 16%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 16%;
    --muted-foreground: 0 0% 70%;

    --accent: 25 100% 55%;
    --accent-foreground: 0 0% 10%;

    --destructive: 0 100% 50%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 20%;
    --input: 0 0% 20%;
    --ring: 48 100% 50%;

    --radius: 0.5rem;
    --container-padding: 1rem;
  }

  /* Reset and sensible defaults */
  *, *::before, *::after { box-sizing: border-box; }

  html, body, #__next { height: 100%; }

  html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

  body {
    margin: 0;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    line-height: 1.4;
    -webkit-font-smoothing: antialiased;
  }

  a { color: inherit; text-decoration: none; }

  img { max-width: 100%; height: auto; display: block; }
}

/* Lightweight semantic utilities to mirror design tokens for environments without full Tailwind class generation */
@layer utilities {
  .bg-background { background-color: hsl(var(--background)); }
  .text-foreground { color: hsl(var(--foreground)); }
  .bg-card { background-color: hsl(var(--card)); }
  .text-card-foreground { color: hsl(var(--card-foreground)); }
  .bg-popover { background-color: hsl(var(--popover)); }
  .text-popover-foreground { color: hsl(var(--popover-foreground)); }
  .bg-primary { background-color: hsl(var(--primary)); }
  .text-primary-foreground { color: hsl(var(--primary-foreground)); }
  .bg-secondary { background-color: hsl(var(--secondary)); }
  .text-secondary-foreground { color: hsl(var(--secondary-foreground)); }
  .text-muted-foreground { color: hsl(var(--muted-foreground)); }
  .bg-accent { background-color: hsl(var(--accent)); }
  .text-accent-foreground { color: hsl(var(--accent-foreground)); }
  .text-accent { color: hsl(var(--accent)); }
  .border-border { border-color: hsl(var(--border)); }
}

/* Global components/helpers */
@layer components {
  .container {
    width: 100%;
    max-width: 1120px;
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--container-padding);
    padding-right: var(--container-padding);
  }

  .card {
    background-color: hsl(var(--card));
    color: hsl(var(--card-foreground));
    border: 1px solid hsl(var(--border));
    border-radius: calc(var(--radius));
    padding: 1rem;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    border: 1px solid transparent;
    cursor: pointer;
    font-weight: 600;
  }

  .btn.secondary {
    background-color: transparent;
    color: hsl(var(--foreground));
    border-color: hsl(var(--border));
  }

  .input {
    width: 100%;
    padding: 0.5rem 0.75rem;
    border-radius: 0.375rem;
    background: hsl(var(--input));
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--border));
    outline: none;
  }

  .input:focus {
    box-shadow: 0 0 0 4px color-mix(in srgb, hsl(var(--ring)) 20%, transparent);
    border-color: hsl(var(--ring));
  }

  .kbd {
    display: inline-block;
    padding: 0.125rem 0.375rem;
    border-radius: 0.375rem;
    background: rgba(0,0,0,0.12);
    font-size: 0.85em;
    border: 1px solid rgba(255,255,255,0.04);
  }

  /* Chat UI helpers */
  .chat-container {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    width: 380px;
    max-height: 75vh;
    display: flex;
    flex-direction: column;
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    background: linear-gradient(180deg, hsl(var(--card)) 0%, hsl(var(--popover)) 100%);
  }

  .chat-header { padding: 0.75rem; display:flex; align-items:center; justify-content:space-between; background: hsl(var(--accent)); color: hsl(var(--accent-foreground)); }
  .chat-messages { padding: 1rem; overflow-y: auto; display:flex; flex-direction:column; gap:0.75rem; }
  .chat-message { padding:0.5rem 0.75rem; border-radius:0.5rem; max-width:85%; }
  .chat-message.user { margin-left:auto; background: hsl(var(--primary)); color: hsl(var(--primary-foreground)); }
  .chat-message.assistant { background: hsl(var(--secondary)); color: hsl(var(--secondary-foreground)); }
}

/* Small responsive tweaks */
@media (max-width: 640px) {
  :root { --container-padding: 0.75rem; }
  .chat-container { right: 0.5rem; left: 0.5rem; width: auto; }
}

/* Animation */
@keyframes bounce {
  0%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-6px); }
}

/* Typing indicator */
.typing-indicator { display:flex; gap:0.35rem; align-items:center; }
.typing-indicator span { width:0.5rem; height:0.5rem; border-radius:50%; background:hsl(var(--accent)); animation:bounce 1.4s infinite ease-in-out; }
.typing-indicator span:nth-child(1){ animation-delay:0s } .typing-indicator span:nth-child(2){ animation-delay:0.12s } .typing-indicator span:nth-child(3){ animation-delay:0.24s }
